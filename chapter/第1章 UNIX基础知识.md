## 第1章 `UNIX`基础知识

### 1.2 `UNIX`体系结构

简单来说，`UNIX`操作系统包括有内核，公用函数库，`shell`，应用程序。

内核的接口被称为系统调用。公用函数库则构建在系统调用接口智商，应用程序既可以使用公用函数库，也可以使用系统调用。`shell`则是一个特殊的应用程序，它为运行其它的应用程序提供了一个接口。

### 1.3 登录

* `shell`：`shell`是一个命令行解释器，用户可以通过`shell`与操作系统交互。输入`cat /etc/shells`可以查看当前系统支持的所有`shell`。

  ```shell
  $ cat /etc/shells
  # /etc/shells: valid login shells
  /bin/sh
  /bin/bash
  /bin/rbash
  /bin/dash
  /usr/bin/tmux
  /usr/bin/screen
  ```

  输入命令`echo $SHELL`可以查看当前系统运行的`shell`。

### 1.4 文件和目录

* 根目录：/
* 目录：目录也是一个文件
* 文件名：文件名只允许大小写字母，数字，句点（.），短横线（-），下划线（_）
* 路径名：路径分为相对路径和绝对路径
  * 绝对路径：以`/`开始
  * 相对路径：相对于当前目录的路径
* 工作目录：运行程序的目录，可以通过`chdir`修改
* 起始目录：登录时，工作目录设置为起始目录（`home directory`）

### 1.5 输入和输出

* 文件描述符：一个小的非负整数。内核用来标识一个特定进程正在访问的文件。
* 标准输入、标准输出、标准错误，标准输入的`FD`是`STDIN_FILENO`（0），标准输出的`FD`是`STDOUT_FILENO`（1），标准错误的`FD`是`STDERR_FILENO`（2）。
* 不带缓冲的`I/O`：函数`open`，`read`，`write`，`lseek`以及`close`都提供不带缓冲的`I/O`，这些函数都是有文件描述符。

### 1.6 程序和进程

1. 程序是一个存储在磁盘上的可执行文件，内核使用`exec`函数将程序读入内存，并执行。
2. 程序的执行实例称为进程，每个进程都有一个进程`ID`用来唯一标识这个进程。进程`ID`总是一个非负整数。调用函数`getpid`可以获取到当前进程。
3. 进程控制，有3个用于进程控制的函数：`fork`，`exec`，`waitpid`。
4. 一个进程内的所有线程共享同一地址空间，文件描述符，栈以及与进程相关的属性。与进程相同，线程也用`ID`标识。

### 1.7 出错处理

`<errno.h>`定义了错误号，也可以使用`man 3 errno`查看错误号。

### 1.8 用户标识

* 用户`ID`：每个用户都有一个用户`ID`，`root`的用户`ID`是0
* 组`ID`：可以将多个用户加入一个用户组。一个用户可以加入多个组。

### 1.9 信号

键盘上可以通过`Ctrl + C`发送`SIGINT`信号，`Ctrl+\`发送`SIGQUIT`信号。

### 1.10 时间

* 日历时间：使用`UTC`时间
* 进程时间：进程执行时间有3个值
  * 时钟时间：`real`，它是进程运行的时间总量，与系统中同时运行的进程数有关。
  * 用户`CPU`时间：是执行用户指令所用的时间。
  * 系统`CPU`时间：执行内核程序所用的时间。





